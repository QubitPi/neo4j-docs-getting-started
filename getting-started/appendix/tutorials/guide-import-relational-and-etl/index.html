<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5, minimum-scale=1">
    <meta name="msvalidate.01" content="B5163518CBE4A854B63801277FE5E35C" />
    <meta name="google-site-verification" content="ucqagxjVuq0lJZeLKs0F5AppzK111lNt3IoxU6mzlJE" />
    <meta name="robots" content="index, follow" />
    <meta name="googlebot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
    <meta name="bingbot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />

    <meta property="og:locale" content="en_US" />
    <meta property="og:type" content="article" />

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-WK23PSS');</script>
<!-- Hotjar Tracking Code for staging -->
<script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:3587741,hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
</script>
<!-- End Hotjar Tracking code -->
    <title>Tutorial: Import data from a relational database into Neo4j - Getting Started</title>
    <link rel="prev" href="../guide-build-a-recommendation-engine/">
    <link rel="next" href="../guide-import-desktop-csv/">
      <meta name="description" content="This tutorial shows the process for exporting data from a relational database (PostgreSQL) and importing into a graph database (Neo4j). You will learn how to take data from the relational system and to the graph by translating the schema and using import tools.">
<link rel="stylesheet" href="https://neo4j.com/wp-content/themes/neo4jweb/assets/neo4j-react-modules-assets/search-preact/chunkless/bundle.css" />
<link rel="stylesheet" href="https://neo4j.com/wp-content/themes/neo4jweb/assets/neo4j-react-modules-assets/search-preact/chunkless/utilities.min.css" />

    <link rel="preload" href="../../../../assets/fonts/fontawesome-webfont.woff2?v=4.7.0" as="font">
    <link rel="stylesheet" href="../../../../assets/css/site.css">
    <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@300;400;600;700&display=swap" rel="stylesheet">

    <link rel="shortcut icon" href="https://neo4j.com/wp-content/themes/neo4jweb/favicon.ico" />



    <meta property="neo:type" content="Docs">
    <meta property="neo:site" content="Reference Docs">


    <meta property="og:site_name" content="Neo4j Graph Data Platform" />
    <meta property="article:publisher" content="https://www.facebook.com/neo4j.graph.database" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:creator" content="@neo4j" />
    <meta name="twitter:site" content="@neo4j" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Tutorial: Import data from a relational database into Neo4j - Getting Started" />
    <meta property="og:locale" content="en_US" />
    <meta property="og:image" content="https://dist.neo4j.com/wp-content/uploads/20210423062553/neo4j-social-share-21.png" />
    <meta property="og:description" content="This tutorial shows the process for exporting data from a relational database (PostgreSQL) and importing into a graph database (Neo4j). You will learn how to take data from the relational system and to the graph by translating the schema and using import tools." />
    <meta property="og:url" content="https://neo4j.com/docs/getting-started/appendix/tutorials/guide-import-relational-and-etl/" />
    <link rel="shortcut icon" href="https://neo4j.com/wp-content/themes/neo4jweb/favicon.ico" />
  </head>
  <body class="article docs">
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WK23PSS"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
<script>(function(f,b){if(!b.__SV){var e,g,i,h;window.mixpanel=b;b._i=[];b.init=function(e,f,c){function g(a,d){var b=d.split(".");2==b.length&&(a=a[b[0]],d=b[1]);a[d]=function(){a.push([d].concat(Array.prototype.slice.call(arguments,0)))}}var a=b;"undefined"!==typeof c?a=b[c]=[]:c="mixpanel";a.people=a.people||[];a.toString=function(a){var d="mixpanel";"mixpanel"!==c&&(d+="."+c);a||(d+=" (stub)");return d};a.people.toString=function(){return a.toString(1)+".people (stub)"};i="disable time_event track track_pageview track_links track_forms track_with_groups add_group set_group remove_group register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking start_batch_senders people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user people.remove".split(" ");
for(h=0;h<i.length;h++)g(a,i[h]);var j="set set_once union unset remove delete".split(" ");a.get_group=function(){function b(c){d[c]=function(){call2_args=arguments;call2=[c].concat(Array.prototype.slice.call(call2_args,0));a.push([e,call2])}}for(var d={},e=["get_group"].concat(Array.prototype.slice.call(arguments,0)),c=0;c<j.length;c++)b(j[c]);return d};b._i.push([e,f,c])};b.__SV=1.2;e=f.createElement("script");e.type="text/javascript";e.async=!0;e.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?
MIXPANEL_CUSTOM_LIB_URL:"file:"===f.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";g=f.getElementsByTagName("script")[0];g.parentNode.insertBefore(e,g)}})(document,window.mixpanel||[]);
mixpanel.init("4bfb2414ab973c741b6f067bf06d5575", {batch_requests: true})
mixpanel.track("Page View", {
    pathname: window.location.origin + window.location.pathname,
    search: window.location.search,
    hash: window.location.hash,
    referrer: document.referrer,
})
</script>
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="/">

      <img class="navbar-logo" src="https://dist.neo4j.com/wp-content/uploads/20210422142941/neo4j-logo-2020.svg" alt="Neo4j Docs" />
      <a href="/docs/" class="navbar-item no-left-padding" aria-label="Docs">
        Docs
      </a>

      </div>

      <button class="navbar-search search-button" data-target="topbar-nav" id="search_open_mobile" aria-label="Open Search">
        <svg width="23px" height="23px" viewBox="0 0 23 23" version="1.1" class="fill-current float-right" id="searchx" role="button" title="Search Website">
          <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="round"
            stroke-linejoin="round">
            <g transform="translate(-2.000000, -2.000000)" stroke="#a0aec0" stroke-width="1.5">
              <circle
                transform="translate(11.389364, 11.388564) rotate(-23.025000) translate(-11.389364, -11.388564) "
                cx="11.3893642" cy="11.3885639" r="8.056"></circle>
              <path d="M17.0853333,17.0844444 L23.3333333,23.3333333" ></path>
            </g>
          </g>
        </svg>
      </button>
      <button class="navbar-burger" data-target="topbar-nav" aria-label="Mobile Navigation Button">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
            <div class="navbar-end">


        <div class="navbar-item has-dropdown is-hoverable docs">
          <a class="navbar-link" href="/docs/">Docs</a>
          <div class="navbar-dropdown">
            <div class="navbar-item project">
              <span class="project-name">Neo4j DBMS</span>
              <ul class="project-links">
                <li><a href="/docs/getting-started/current/" class="project-link">Getting Started</a></li>
                <li><a href="/docs/operations-manual/current/" class="project-link">Operations</a></li>
                <li><a href="/docs/migration-guide/current/" class="project-link">Migration and Upgrade</a></li>
                <li><a href="/docs/status-codes/current/" class="project-link">Status Codes</a></li>
                <li><a href="/docs/java-reference/current/" class="project-link">Java Reference</a></li>
                <li><a href="/docs/kerberos-add-on/current/" class="project-link">Kerberos Add-on</a></li>
              </ul>
            </div>

            <div class="navbar-item project">
              <a class="project-name" href="/docs/aura/">Neo4j Aura</a>
              <ul class="project-links">
                <li><a class="project-link" href="/docs/aura">Neo4j Aura</a></li>
                <li><a class="project-link" href="/docs/aura/auradb/">Neo4j AuraDB</a></li>
                <li><a class="project-link" href="/docs/aura/aurads/">Neo4j AuraDS</a></li>
              </ul>
            </div>

            <div class="navbar-item project">
              <span class="project-name">Neo4j Tools</span>
              <ul class="project-links">
                <li><a href="/docs/bloom-user-guide/current/" class="project-link">Neo4j Bloom</a></li>
                <li><a href="/docs/browser-manual/current/" class="project-link">Neo4j Browser</a></li>
                <li><a href="/docs/data-importer/current/" class="project-link">Neo4j Data Importer</a></li>
                <li><a href="/docs/desktop-manual/current/" class="project-link">Neo4j Desktop</a></li>
                <li><a href="/docs/ops-manager/current/" class="project-link">Neo4j Ops Manager</a></li>
              </ul>
            </div>

            <div class="navbar-item project">
              <span class="project-name">Neo4j Graph Data Science</span>
              <ul class="project-links">
                <li><a href="/docs/graph-data-science/current/" class="project-link">Neo4j Graph Data Science Library</a></li>
              </ul>
            </div>

            <div class="navbar-item project">
              <span class="project-name">Cypher Query Language</span>
              <ul class="project-links">
                <li><a href="/docs/cypher-manual/current/" class="project-link">Cypher</a></li>
                <li><a href="/docs/cypher-cheat-sheet/current/" class="project-link">Cypher Cheat Sheet</a></li>
                <li><a href="/docs/apoc/current/" class="project-link">APOC Library</a></li>
              </ul>
            </div>

            <div class="navbar-item project">
              <span class="project-name" href="/docs/drivers-apis">Create applications</span>
              <ul class="project-links">
                <li><a href="/docs/python-manual/current/" class="project-link">Python Driver</a></li>
                <li><a href="/docs/go-manual/current/" class="project-link">Go Driver</a></li>
                <li><a href="/docs/java-manual/current/" class="project-link">Java Driver</a></li>
                <li><a href="/docs/javascript-manual/current/" class="project-link">JavaScript Driver</a></li>
                <li><a href="/docs/dotnet-manual/current/" class="project-link">.Net Driver</a></li>
                <li><a href="/docs/graphql-manual/current/" class="project-link">Neo4j GraphQL Library</a></li>
                <li><a href="/docs/http-api/current/" class="project-link">HTTP API</a></li>
                <li><a href="/docs/ogm-manual/current/" class="project-link">OGM Library</a></li>
                <li><a href="https://docs.spring.io/spring-data/neo4j/docs/current/reference/html/#reference" class="project-link">Spring Data Neo4j</a></li>
                <li><a href="/docs/spark/" class="project-link">Neo4j Connector for Apache Spark</a></li>
                <li><a href="/docs/kafka/" class="project-link">Neo4j Connector for Apache Kafka</a></li>
              </ul>
            </div>

          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable labs">
          <a class="navbar-link" href="/labs/">Labs</a>
          <div class="navbar-dropdown">
            <div class="navbar-item project">
              <a class="project-name" href="/labs/arrows/">arrows.app</a>
              <ul class="project-links">
                <li><a href="/labs/arrows/" class="project-link">Details</a></li>
                <li><a href="https://arrows.app" class="project-link">arrows.app</a></li>
              </ul>
            </div>
            <div class="navbar-item project">
              <a class="project-name" href="/labs/apoc/">APOC Extended</a>

              <ul class="project-links">
                <li><a href="/labs/apoc/5/" class="project-link">Documentation</a></li>
                <li><a href="/developer/neo4j-apoc/" class="project-link">Developer Guide</a></li>
              </ul>
            </div>
            <div class="navbar-item project">
              <a class="project-name" href="/labs/halin/">Halin</a>
            </div>
            <div class="navbar-item project">
              <a class="project-name" href="/labs/etl-tool/">ETL Tool</a>
              <ul class="project-links">
                <li><a href="/labs/etl-tool/" class="project-link">Details</a></li>
                <li><a href="/labs/etl-tool/1.5.0/" class="project-link">Documentation</a></li>
              </ul>
            </div>
            <div class="navbar-item project">
              <a class="project-name" href="/labs/neo4j-migrations/">Neo4j Migrations</a>
              <ul class="project-links">
                <li><a href="/labs/neo4j-migrations/" class="project-link">Details</a></li>
                <li><a href="/labs/neo4j-migrations/2.0/" class="project-link">Documentation</a></li>
              </ul>
            </div>
            <div class="navbar-item project">
              <a class="project-name" href="/labs/liquibase/">Neo4j Plugin For Liquibase</a>
              <ul class="project-links">
                <li><a href="/labs/liquibase/" class="project-link">Details</a></li>
                <li><a href="https://github.com/liquibase/liquibase-neo4j" class="project-link">Documentation</a></li>
              </ul>
            </div>
            <div class="navbar-item project">
              <a class="project-name" href="/labs/neosemantics/">Neosemantics</a>
              <ul class="project-links">
                <li><a href="/labs/neosemantics/tutorial/" class="project-link">Getting Started</a></li>
                <li><a href="/labs/neosemantics/4.0/" class="project-link">Documentation</a></li>
              </ul>
            </div>
            <div class="navbar-item project">
              <a class="project-name" href="/labs/neo4j-helm/">Neo4j Helm</a>
              <ul class="project-links">
                <li><a href="/labs/neo4j-helm/" class="project-link">Details</a></li>
                <li><a href="/labs/neo4j-helm/1.0.0/" class="project-link">Documentation</a></li>
              </ul>
            </div>
            <div class="navbar-item project">
              <a class="project-name" href="/labs/neodash/">NeoDash</a>
              <ul class="project-links">
                <li><a href="/labs/neodash/" class="project-link">Details</a></li>
                <li><a href="/labs/neodash/2.1/" class="project-link">Documentation</a></li>
              </ul>
            </div>
            <div class="navbar-item project">
              <a class="project-name" href="/labs/neomodel/">neomodel</a>
              <ul class="project-links">
                <li><a href="/labs/neomodel/" class="project-link">Details</a></li>
                <li><a href="https://neomodel.readthedocs.io/en/latest/" target="_blank" class="project-link">Documentation</a></li>
              </ul>
            </div>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable developer">
          <a class="navbar-link" href="/developer/resources/">Get Help</a>
          <div class="navbar-dropdown">
            <div class="navbar-item project">
              <a class="project-name" href="https://graphacademy.neo4j.com/?ref=docs" target="_blank">GraphAcademy</a>
              <ul class="project-links">
                <li><a class="project-link" href="https://graphacademy.neo4j.com/?ref=docs">Free, Self Paced Training</a></li>
                <li><a class="project-link" href="https://graphacademy.neo4j.com/certification/?ref=docs" target="_blank">Certification</a></li>
              </ul>
            </div>

            <div class="navbar-item project">
              <a class="project-name" href="https://dev.neo4j.com/forum" target="_blank">Community Forum</a>
            </div>
            <div class="navbar-item project">
              <a class="project-name" href="https://dev.neo4j.com/chat" target="_blank">Discord Chat</a>
            </div>
            <div class="navbar-item project">
              <a class="project-name" href="/developer/kb" target="_blank">Knowledge Base</a>
            </div>
            <div class="navbar-item project">
              <a class="project-name" href="https://medium.com/neo4j" target="_blank">Neo4j Developer Blog</a>
            </div>
            <div class="navbar-item project">
              <a class="project-name" href="https://www.youtube.com/neo4j" target="_blank">Neo4j Videos</a>
            </div>
          </div>
        </div>
        <div class="navbar-item is-hoverable getting-started-cta">
          <a class="navbar-link primary" href="https://neo4j.com/cloud/platform/aura-graph-database/?ref=docs-nav-get-started">Get Started Free</a>
        </div>
        <div class="navbar-item">
          <a class="navbar-link search-button" href="#search" id="search_open"><svg width="23px" height="23px" viewBox="0 0 23 23"
              version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
              class="fill-current float-right" id="search" role="button" title="Search Website">
              <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="round"
                stroke-linejoin="round">
                <g transform="translate(-2.000000, -2.000000)" stroke="#a0aec0" stroke-width="1.5">
                  <circle
                    transform="translate(11.389364, 11.388564) rotate(-23.025000) translate(-11.389364, -11.388564) "
                    cx="11.3893642" cy="11.3885639" r="8.056"></circle>
                  <path d="M17.0853333,17.0844444 L23.3333333,23.3333333" ></path>
                </g>
              </g>
            </svg><span class="navbar-mobile">Search</span></a>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="getting-started" data-version="">
  <aside class="nav">
    <div class="panels">
      <div class="selectors">
        
      </div>
      <div class="nav-panel-menu is-active" data-panel="menu">
    <nav class="nav-menu">
    <ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../">Welcome to Neo4j</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link nav-item-toggle" href="../../../get-started-with-neo4j/">Get started with Neo4j</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../get-started-with-neo4j/graph-database/">What is a graph database?</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link nav-item-toggle" href="../../../data-modeling/">Model your data for Neo4j</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../data-modeling/guide-data-modeling/">Graph modeling guidelines</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../data-modeling/modeling-designs/">Modeling designs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../data-modeling/relational-to-graph-modeling/">Modeling: relational to graph</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../data-modeling/modeling-tips/">Graph modeling tips</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../data-modeling/graph-model-refactoring/">Graph model refactoring</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../data-modeling/data-modeling-tools/">Data modeling tools</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link nav-item-toggle" href="../../../data-import/">Import your data into Neo4j</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../data-import/csv-import/">Importing CSV data into Neo4j</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../data-import/json-rest-api-import/">Importing JSON data from a REST API into Neo4j</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../data-import/relational-to-graph-import/">Import: RDBMS to graph</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link nav-item-toggle" href="../../../cypher-intro/">Query a Neo4j database</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../cypher-intro/cypher-sql/">Comparing Cypher with SQL</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../cypher-intro/patterns/">Patterns</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../cypher-intro/patterns-in-practice/">Patterns in practice</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../cypher-intro/results/">Getting the correct results</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../cypher-intro/updating/">Updating the data</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../cypher-intro/large-statements/">Composing large statements</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../cypher-intro/subqueries/">Subqueries in Cypher</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../cypher-intro/schema/">Defining a schema</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../cypher-intro/dates-datetimes-durations/">Dates, datetimes, and durations</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../cypher-intro/procedures-functions/">How to extend Cypher</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../cypher-intro/load-csv/">Tutorial: Import data</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../cypher-intro/resources/">Cypher resources</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link nav-item-toggle" href="../../../languages-guides/">Connect to Neo4j</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link nav-item-toggle" href="../../../languages-guides/java/java-intro/">Using Neo4j from Java</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../languages-guides/java/spring-data-neo4j/">Spring Data Neo4j</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../languages-guides/java/quarkus/">Quarkus</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../languages-guides/java/java-frameworks/">Helidon, Micronaut</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../languages-guides/java/neo4j-ogm/">Neo4j - OGM Object Graph Mapper</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../../languages-guides/java/java-procedures/">Procedures and Functions</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../languages-guides/neo4j-dotnet/">Using Neo4j from .NET</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../languages-guides/neo4j-javascript/">Neo4j from JavaScript</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../languages-guides/neo4j-python/">Using Neo4j from Python</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../languages-guides/neo4j-go/">Using Neo4j from Go</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../languages-guides/integration-tools/integration/">Neo4j Connectors</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../languages-guides/community-drivers/">Community-contributed libraries</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../../gds/">Data science with Neo4j</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link nav-item-toggle" href="../../../graph-visualization/graph-visualization/">Visualize your data in Neo4j</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../graph-visualization/graph-visualization-tools/">Graph visualization tools</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link nav-item-toggle" href="../../">Appendix</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link nav-item-toggle" href="../../graphdb-concepts/">Graph database concepts</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../graphdb-concepts/graphdb-vs-rdbms/">Transition from relational to graph database</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../graphdb-concepts/graphdb-vs-nosql/">Transition from NoSQL to graph database</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../example-data/">Example datasets</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../getting-started-resources/">Getting started resources</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link nav-item-toggle" href="../tutorials-overview/">Tutorials</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../guide-cypher-basics/">Tutorial: Getting Started with Cypher</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../guide-build-a-recommendation-engine/">Tutorial: Build a Cypher Recommendation Engine</a>
  </li>
  <li class="nav-item is-current-page" data-depth="3">
    <a class="nav-link" href="./">Tutorial: Import data from a relational database into Neo4j</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../guide-import-desktop-csv/">How-To: Import CSV data with Neo4j Desktop</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
  <div class="toolbar-wrapper">
    <button class="nav-toggle" aria-label="Toggle Table of Contents"></button>
    <a href="../../../" class="home-link" aria-label="Go to home page"></a>
    <nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../../">Getting Started</a></li>
    <li><a href="../../">
        Appendix
    </a></li>
    <li><a href="../tutorials-overview/">
        Tutorials
    </a></li>
    <li><a href="./">
        Tutorial: Import data from a relational database into Neo4j
    </a></li>
  </ul>
</nav>
        <div class="edit-this-page"><a href="https://github.com/neo4j/docs-getting-started/tree/HEAD/modules/ROOT/pages/appendix/tutorials/guide-import-relational-and-etl.adoc">Edit this Page</a></div>
    </div>
</div>

  <div class="content">
<article class="doc">
<div class="sect-header">
<h1 class="page">Tutorial: Import data from a relational database into Neo4j</h1>
</div>





<div class="sect1">
<h2 id="_introduction"><a class="anchor" href="#_introduction"></a>Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This tutorial shows the process for exporting data from a relational database (PostgreSQL) and importing into a graph database (Neo4j).
You will learn how to take data from the relational system and to the graph by translating the schema and using import tools.</p>
</div>
<div class="paragraph">
<p>Alternatively, you can:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create <a href="https://neo4j.com/cloud/aura/?ref=developer-guides">AuraDB cloud instance</a>.</p>
</li>
<li>
<p>Start a blank <a href="https://neo4j.com/sandbox/?ref=guide-importing-data-and-etl" target="_blank" rel="noopener">Neo4j Sandbox</a>.</p>
</li>
<li>
<p>Download and install <a href="https://neo4j.com/docs/desktop-manual/current/">Neo4j Desktop</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This guide uses a specific dataset, but its principles can be applied and reused with any data domain.</p>
</div>
<div class="paragraph">
<p>You should have a basic understanding of the property graph model and know how to model data as a graph.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="about-domain"><a class="anchor" href="#about-domain"></a>About the data domain</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this guide, we will be using the <a href="https://github.com/neo4j-documentation/developer-resources/tree/gh-pages/data/northwind" target="_blank" rel="noopener">Northwind dataset</a>, an often-used SQL dataset.
This data depicts a product sale system - storing and tracking customers, products, customer orders, warehouse stock, shipping, suppliers, and even employees and their sales territories.
Although the NorthWind dataset is often used to demonstrate SQL and relational databases, the data also can be structured as a graph.</p>
</div>
<div class="paragraph">
<p>An entity-relationship diagram (ERD) of the Northwind dataset is shown below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../_images/Northwind_diagram.jpg" alt="Northwind diagram" width="600">
</div>
</div>
<div class="paragraph">
<p>First, this is a rather large and detailed model.
We can scale this down a bit for our example and choose the entities that are most critical for our graph - in other words, those that might benefit most from seeing the connections.
For our use case, we really want to optimize the relationships with orders - what products were involved (with the categories and suppliers for those products), which employees worked on them and those employees' managers.</p>
</div>
<div class="paragraph">
<p>Using these business requirements, we can narrow our model down to these essential entities.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../_images/Northwind_diagram_focus.jpg" alt="Northwind diagram focus" width="600">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="northwind-graph-model"><a class="anchor" href="#northwind-graph-model"></a>Developing a graph model</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The first thing you will need to do to get data from a relational database into a graph is to translate the relational data model to a graph data model.
Determining how you want to structure tables and rows as nodes and relationships may vary depending on what is most important to your business needs.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>For more information on adapting your graph model to different scenarios, check out our <a href="../../../data-modeling/modeling-designs/" class="xref page">modeling designs</a> guide.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When deriving a graph model from a relational model, you should keep a couple of general guidelines in mind.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>A <em>row</em> is a <em>node</em>.</p>
</li>
<li>
<p>A <em>table name</em> is a <em>label name</em>.</p>
</li>
<li>
<p>A <em>join or foreign key</em> is a <em>relationship</em>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>With these principles in mind, we can map our relational model to a graph with the following steps:</p>
</div>
<div class="sect2">
<h3 id="_rows_to_nodes_table_names_to_labels"><a class="anchor" href="#_rows_to_nodes_table_names_to_labels"></a>Rows to nodes, table names to labels</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Each row on our <code>Orders</code> table becomes a node in our graph with <code>Order</code> as the label.</p>
</li>
<li>
<p>Each row on our <code>Products</code> table becomes a node with <code>Product</code> as the label.</p>
</li>
<li>
<p>Each row on our <code>Suppliers</code> table becomes a node with <code>Supplier</code> as the label.</p>
</li>
<li>
<p>Each row on our <code>Categories</code> table becomes a node with <code>Category</code> as the label.</p>
</li>
<li>
<p>Each row on our <code>Employees</code> table becomes a node with <code>Employee</code> as the label.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_joins_to_relationships"><a class="anchor" href="#_joins_to_relationships"></a>Joins to relationships</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Join between <code>Suppliers</code> and <code>Products</code> becomes a relationship named <code>SUPPLIES</code> (where supplier supplies product).</p>
</li>
<li>
<p>Join between <code>Products</code> and <code>Categories</code> becomes a relationship named <code>PART_OF</code> (where product is part of a category).</p>
</li>
<li>
<p>Join between <code>Employees</code> and <code>Orders</code> becomes a relationship named <code>SOLD</code> (where employee sold an order).</p>
</li>
<li>
<p>Join between <code>Employees</code> and itself (unary relationship) becomes a relationship named <code>REPORTS_TO</code> (where employees have a manager).</p>
</li>
<li>
<p>Join with join table (<code>Order Details</code>) between <code>Orders</code> and <code>Products</code> becomes a relationship named <code>CONTAINS</code> with properties of <code>unitPrice</code>, <code>quantity</code>, and <code>discount</code> (where order contains a product).</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>If we draw our translation out on the whiteboard, we have this graph data model.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../_images/northwind_graph_simple-arr.svg" alt="northwind graph simple arr" width="600">
</div>
</div>
<div class="paragraph">
<p>Now, we can, of course, decide that we want to include the rest of the entities from our relational model, but for now, we will keep to this smaller graph model.</p>
</div>
</div>
<div class="sect2">
<h3 id="_how_does_the_graph_model_differ_from_the_relational_model"><a class="anchor" href="#_how_does_the_graph_model_differ_from_the_relational_model"></a>How does the graph model differ from the relational model?</h3>
<div class="ulist">
<ul>
<li>
<p>There are no nulls. Non-existing value entries (properties) are just not present.</p>
</li>
<li>
<p>It describes the relationships in more detail. For example, we know that an employee SOLD an order rather than having a foreign key relationship between the Orders and Employees tables. We could also choose to add more metadata about that relationship, should we wish.</p>
</li>
<li>
<p>Either model can be more normalized. For example, addresses have been denormalized in several of the tables, but could have been in a separate table. In a future version of our graph model, we might also choose to separate addresses from the <code>Order</code> (or <code>Supplier</code> or <code>Employee</code>) entities and create separate <code>Address</code> nodes.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="export-csv"><a class="anchor" href="#export-csv"></a>Exporting relational tables to CSV</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Thankfully, this step has already been done for you with the Northwind data you will use later on in this guide.</p>
</div>
<div class="paragraph">
<p>However, if you are working with another data domain, you need to take the data from the relational tables and put it in another format for loading to the graph.
A common format that many systems can handle a flat file of comma-separated values (CSV).</p>
</div>
<div class="paragraph">
<p>Here is an example script we already ran to export the northwind data into CSV files for you.</p>
</div>
<div class="paragraph">
<p><em>export_csv.sql</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre>COPY (SELECT * FROM customers) TO '/tmp/customers.csv' WITH CSV header;
COPY (SELECT * FROM suppliers) TO '/tmp/suppliers.csv' WITH CSV header;
COPY (SELECT * FROM products)  TO '/tmp/products.csv' WITH CSV header;
COPY (SELECT * FROM employees) TO '/tmp/employees.csv' WITH CSV header;
COPY (SELECT * FROM categories) TO '/tmp/categories.csv' WITH CSV header;

COPY (SELECT * FROM orders
      LEFT OUTER JOIN order_details ON order_details.OrderID = orders.OrderID) TO '/tmp/orders.csv' WITH CSV header;</pre>
</div>
</div>
<div class="paragraph">
<p>If you want to create the CSV files yourself using your own northwind RDBMS, you can run this script against your  RDBMS with the command <code>psql -d northwind &lt; export_csv.sql</code>.</p>
</div>
<div class="paragraph">
<p><strong>Note</strong>: You need not run this script unless you want to execute it against your own northwind RDBMS.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="import-with-cypher"><a class="anchor" href="#import-with-cypher"></a>Importing the data using Cypher</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can use Cypher<sup>&reg;</sup>'s <a href="https://neo4j.com/docs/cypher-manual/current/clauses/load-csv/" target="_blank" rel="noopener"><code>LOAD CSV</code></a> command to transform the contents of the CSV file into a graph structure.</p>
</div>
<div class="paragraph">
<p>When you use <code>LOAD CSV</code> to create nodes and relationships in the database, you have two options for where the CSV files reside:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the <strong>import</strong> folder for the Neo4j instance that you can manage.</p>
</li>
<li>
<p>From a publicly-available location such as an S3 bucket or a github location. You must use this option if you are using Neo4j AuraDB or Neo4j Sandbox.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you want to use the CSV files for the Neo4j instance you manage, you can copy the CSV files from
<a href="https://github.com/neo4j-graph-examples/northwind/tree/main/import">Northwind files on GitHub</a> and place them in the <strong>import</strong> folder for your Neo4j DBMS.</p>
</div>
<div class="paragraph">
<p>You use use Cypher&#8217;s <code>LOAD CSV</code> statement to read each file and add Cypher clauses after it to take the row/column data and transform it to the graph.</p>
</div>
<div class="paragraph">
<p>Next you will run Cypher code to:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Load the nodes from the CSV files.</p>
</li>
<li>
<p>Create the indexes and constraints for the data in the graph.</p>
</li>
<li>
<p>Create the relationships between the nodes.</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="_creating_order_nodes"><a class="anchor" href="#_creating_order_nodes"></a>Creating <strong>Order</strong> nodes</h3>
<div class="paragraph">
<p>Execute this Cypher block to create the Order nodes in the database:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cypher hljs" data-lang="cypher">// Create orders
LOAD CSV WITH HEADERS FROM 'https://gist.githubusercontent.com/jexp/054bc6baf36604061bf407aa8cd08608/raw/8bdd36dfc88381995e6823ff3f419b5a0cb8ac4f/orders.csv' AS row
MERGE (order:Order {orderID: row.OrderID})
  ON CREATE SET order.shipName = row.ShipName;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you have placed the CSV files in to the <strong>import</strong> folder, you should use this code syntax to load the CSV files from a local directory:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>// Create orders
LOAD CSV WITH HEADERS FROM 'file:///orders.csv' AS row
MERGE (order:Order {orderID: row.OrderID})
  ON CREATE SET order.shipName = row.ShipName;</pre>
</div>
</div>
<div class="paragraph">
<p>This code creates 830 <code>Order</code> nodes in the database.</p>
</div>
<div class="paragraph">
<p>You can view some of the nodes in the database by executing this code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cypher hljs" data-lang="cypher">MATCH (o:Order) return o LIMIT 5;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The graph view is:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../_images/import-guide-Orders.svg" alt="import guide Orders" width="300">
</div>
</div>
<div class="paragraph">
<p>The table view contains these values for the node properties:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">o</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{"shipName":Vins et alcools Chevalier,"orderID":10248}</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{"shipName":Toms Spezialitäten,"orderID":10249}</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{"shipName":Hanari Carnes,"orderID":10250}</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{"shipName":Victuailles en stock,"orderID":10251}</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{"shipName":Suprêmes délices,"orderID":10252}</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>You might notice that you have not imported all of the field columns in the CSV file.
With your statements, you can choose which properties are needed on a node, which can be left out, and which might need imported to another node type or relationship.
You might also notice that you used the <a href="https://neo4j.com/docs/cypher-manual/current/clauses/merge/" target="_blank" rel="noopener"><code>MERGE</code> keyword</a>, instead of <a href="https://neo4j.com/docs/cypher-manual/current/clauses/create/" target="_blank" rel="noopener"><code>CREATE</code></a>.
Though we feel pretty confident there are no duplicates in our CSV files, we can use <code>MERGE</code> as good practice for ensuring unique entities in our database.</p>
</div>
</div>
<div class="sect2">
<h3 id="_creating_product_nodes"><a class="anchor" href="#_creating_product_nodes"></a>Creating <strong>Product</strong> nodes</h3>
<div class="paragraph">
<p>Execute this code to create the Product nodes in the database:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cypher hljs" data-lang="cypher">// Create products
LOAD CSV WITH HEADERS FROM 'https://gist.githubusercontent.com/jexp/054bc6baf36604061bf407aa8cd08608/raw/8bdd36dfc88381995e6823ff3f419b5a0cb8ac4f/products.csv' AS row
MERGE (product:Product {productID: row.ProductID})
  ON CREATE SET product.productName = row.ProductName, product.unitPrice = toFloat(row.UnitPrice);</code></pre>
</div>
</div>
<div class="paragraph">
<p>This code creates 77 <code>Product</code> nodes in the database.</p>
</div>
<div class="paragraph">
<p>You can view some of these nodes in the database by executing this code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cypher hljs" data-lang="cypher">MATCH (p:Product) return p LIMIT 5;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The graph view is:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../_images/import-guide-Products.svg" alt="import guide Products" width="300">
</div>
</div>
<div class="paragraph">
<p>The table view contains these values for the node properties:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">p</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{"unitPrice":18.0,"productID":1,"productName":Chai}</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{"unitPrice":19.0,"productID":2,"productName":Chang}</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{"unitPrice":10.0,"productID":3,"productName":Aniseed Syrup}</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{"unitPrice":22.0,"productID":4,"productName":Chef Anton&#8217;s Cajun Seasoning}</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{"unitPrice":21.35,"productID":5,"productName":Chef Anton&#8217;s Gumbo Mix}</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_creating_supplier_nodes"><a class="anchor" href="#_creating_supplier_nodes"></a>Creating <strong>Supplier</strong> nodes</h3>
<div class="paragraph">
<p>Execute this code to create the Supplier nodes in the database:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cypher hljs" data-lang="cypher">// Create suppliers
LOAD CSV WITH HEADERS FROM 'https://gist.githubusercontent.com/jexp/054bc6baf36604061bf407aa8cd08608/raw/8bdd36dfc88381995e6823ff3f419b5a0cb8ac4f/suppliers.csv' AS row
MERGE (supplier:Supplier {supplierID: row.SupplierID})
  ON CREATE SET supplier.companyName = row.CompanyName;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This code creates 29 <code>Supplier</code> nodes in the database.</p>
</div>
<div class="paragraph">
<p>You can view some of these nodes in the database by executing this code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cypher hljs" data-lang="cypher">MATCH (s:Supplier) return s LIMIT 5;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The graph view is:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../_images/import-guide-Suppliers.svg" alt="import guide Suppliers" width="300">
</div>
</div>
<div class="paragraph">
<p>The table view contains these values for the node properties:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">s</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{"supplierID":1,"companyName":Exotic Liquids}</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{"supplierID":2,"companyName":New Orleans Cajun Delights}</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{"supplierID":3,"companyName":Grandma Kelly&#8217;s Homestead}</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{"supplierID":4,"companyName":Tokyo Traders}</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{"supplierID":5,"companyName":Cooperativa de Quesos 'Las Cabras'}</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_creating_employee_nodes"><a class="anchor" href="#_creating_employee_nodes"></a>Creating <strong>Employee</strong> nodes</h3>
<div class="paragraph">
<p>Execute this code to create the Supplier nodes in the database:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cypher hljs" data-lang="cypher">// Create employees
LOAD CSV WITH HEADERS FROM 'https://gist.githubusercontent.com/jexp/054bc6baf36604061bf407aa8cd08608/raw/8bdd36dfc88381995e6823ff3f419b5a0cb8ac4f/employees.csv' AS row
MERGE (e:Employee {employeeID:row.EmployeeID})
  ON CREATE SET e.firstName = row.FirstName, e.lastName = row.LastName, e.title = row.Title;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This code creates 9 <code>Employee</code> nodes in the database.</p>
</div>
<div class="paragraph">
<p>You can view some of these nodes in the database by executing this code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cypher hljs" data-lang="cypher">MATCH (e:Employee) return e LIMIT 5;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The graph view is:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../_images/import-guide-Employees.svg" alt="import guide Employees" width="300">
</div>
</div>
<div class="paragraph">
<p>The table view contains these values for the node properties:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">e</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{"lastName":Davolio,"firstName":Nancy,"employeeID":1,"title":Sales Representative}</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{"lastName":Fuller,"firstName":Andrew,"employeeID":2,"title":Vice President, Sales}</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{"lastName":Leverling,"firstName":Janet,"employeeID":3,"title":Sales Representative}</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{"lastName":Peacock,"firstName":Margaret,"employeeID":4,"title":Sales Representative}</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{"lastName":Buchanan,"firstName":Steven,"employeeID":5,"title":Sales Manager}</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_creating_category_nodes"><a class="anchor" href="#_creating_category_nodes"></a>Creating <strong>Category</strong> nodes</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cypher hljs" data-lang="cypher">// Create categories
LOAD CSV WITH HEADERS FROM 'https://gist.githubusercontent.com/jexp/054bc6baf36604061bf407aa8cd08608/raw/8bdd36dfc88381995e6823ff3f419b5a0cb8ac4f/categories.csv' AS row
MERGE (c:Category {categoryID: row.CategoryID})
  ON CREATE SET c.categoryName = row.CategoryName, c.description = row.Description;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This code creates 8 <code>Category</code> nodes in the database.</p>
</div>
<div class="paragraph">
<p>You can view some of these nodes in the database by executing this code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cypher hljs" data-lang="cypher">MATCH (c:Category) return c LIMIT 5;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The graph view is:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../_images/import-guide-Categories.svg" alt="import guide Categories" width="300">
</div>
</div>
<div class="paragraph">
<p>The table view contains these values for the node properties:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">c</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{"description":Soft drinks, coffees, teas, beers, and ales,"categoryName":Beverages,"categoryID":1}</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{"description":Sweet and savory sauces, relishes, spreads, and seasonings,"categoryName":Condiments,"categoryID":2}</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{"description":Desserts, candies, and sweet breads,"categoryName":Confections,"categoryID":3}</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{"description":Cheeses,"categoryName":Dairy Products,"categoryID":4}</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{"description":Breads, crackers, pasta, and cereal,"categoryName":Grains/Cereals,"categoryID":5}</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>For very large commercial or enterprise datasets, you may find out-of-memory errors, especially on smaller machines.
To avoid these situations, you can use <code>CALL IN {&#8230;&#8203;} TRANSACTIONS</code> subquery to commit data in batches.
Don&#8217;t forget to prepend this query with <code>:auto</code> in Neo4j Browser.
This practice is not standard recommendation for smaller datasets, but is only recommended when memory issues are threatened.
More information on this subquery can be found in the <a href="https://neo4j.com/docs/cypher-manual/current/clauses/call-subquery/#subquery-call-in-transactions">Cypher manual &#8594; Subqueries in transactions</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_the_indexes_and_constraints_for_the_data_in_the_graph"><a class="anchor" href="#_creating_the_indexes_and_constraints_for_the_data_in_the_graph"></a>Creating the indexes and constraints for the data in the graph</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After the nodes are created, you need to create the relationships between them.
Importing the relationships will mean looking up the nodes you just created and adding a relationship between those existing entities.
To ensure the lookup of nodes is optimized, you will create indexes for any node properties used in the lookups (often the ID or another unique value).</p>
</div>
<div class="paragraph">
<p>We also want to create a constraint (also creates an index with it) that will disallow orders with the same id from getting created, preventing duplicates.
Finally, as the indexes are created after the nodes are inserted, their population happens asynchronously, so we call <code>db.awaitIndexes()</code> to block until they are populated.</p>
</div>
<div class="paragraph">
<p>Execute this code block:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cypher hljs" data-lang="cypher">CREATE INDEX product_id FOR (p:Product) ON (p.productID);
CREATE INDEX product_name FOR (p:Product) ON (p.productName);
CREATE INDEX supplier_id FOR (s:Supplier) ON (s.supplierID);
CREATE INDEX employee_id FOR (e:Employee) ON (e.employeeID);
CREATE INDEX category_id FOR (c:Category) ON (c.categoryID);
CREATE CONSTRAINT order_id FOR (o:Order) REQUIRE o.orderID IS UNIQUE;
CALL db.awaitIndexes();</code></pre>
</div>
</div>
<div class="paragraph">
<p>After you execute this code, you can execute this code to view the indexes (and constraint) in the database:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cypher hljs" data-lang="cypher">CALL db.indexes();</code></pre>
</div>
</div>
<div class="paragraph">
<p>You should see these indexes (and constraint) in the database:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">id</th>
<th class="tableblock halign-left valign-top">name</th>
<th class="tableblock halign-left valign-top">state</th>
<th class="tableblock halign-left valign-top">populationPercent</th>
<th class="tableblock halign-left valign-top">uniqueness</th>
<th class="tableblock halign-left valign-top">type</th>
<th class="tableblock halign-left valign-top">entityType</th>
<th class="tableblock halign-left valign-top">labelsOrTypes</th>
<th class="tableblock halign-left valign-top">properties</th>
<th class="tableblock halign-left valign-top">provider</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">category_id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ONLINE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NONUNIQUE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BTREE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NODE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[Category]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[categoryID]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">native-btree-1.0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">employee_id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ONLINE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NONUNIQUE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BTREE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NODE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[Employee]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[employeeID]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">native-btree-1.0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">order_id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ONLINE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UNIQUE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BTREE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NODE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[Order]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[orderID]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">native-btree-1.0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">product_id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ONLINE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NONUNIQUE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BTREE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NODE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[Product]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[productID]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">native-btree-1.0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">product_name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ONLINE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NONUNIQUE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BTREE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NODE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[Product]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[productName]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">native-btree-1.0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">supplier_id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ONLINE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NONUNIQUE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BTREE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NODE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[Supplier]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[supplierID]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">native-btree-1.0</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_creating_the_relationships_between_the_nodes"><a class="anchor" href="#_creating_the_relationships_between_the_nodes"></a>Creating the relationships between the nodes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Next you have to create relationships:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Between Orders and Employees.</p>
</li>
<li>
<p>Between Products and Suppliers and between Products and Categories.</p>
</li>
<li>
<p>Between Employees.</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="_creating_relationships_between_orders_and_employees"><a class="anchor" href="#_creating_relationships_between_orders_and_employees"></a>Creating relationships between Orders and Employees</h3>
<div class="paragraph">
<p>With the initial nodes and indexes in place, you can now create the relationships for orders to products and orders to employees.</p>
</div>
<div class="paragraph">
<p>Execute this code block:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cypher hljs" data-lang="cypher">// Create relationships between orders and products
LOAD CSV WITH HEADERS FROM 'https://gist.githubusercontent.com/jexp/054bc6baf36604061bf407aa8cd08608/raw/8bdd36dfc88381995e6823ff3f419b5a0cb8ac4f/orders.csv' AS row
MATCH (order:Order {orderID: row.OrderID})
MATCH (product:Product {productID: row.ProductID})
MERGE (order)-[op:CONTAINS]-&gt;(product)
  ON CREATE SET op.unitPrice = toFloat(row.UnitPrice), op.quantity = toFloat(row.Quantity);</code></pre>
</div>
</div>
<div class="paragraph">
<p>This code creates 2155 relationships in the graph.</p>
</div>
<div class="paragraph">
<p>You can view some of them by executing this code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cypher hljs" data-lang="cypher">MATCH (o:Order)-[]-(p:Product)
RETURN o,p LIMIT 10;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Your graph view should look something like this:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../_images/import-guide-CONTAINS.svg" alt="import guide CONTAINS" width="400">
</div>
</div>
<div class="paragraph">
<p>Then, execute this code block:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cypher hljs" data-lang="cypher">// Create relationships between orders and employees
LOAD CSV WITH HEADERS FROM 'https://gist.githubusercontent.com/jexp/054bc6baf36604061bf407aa8cd08608/raw/8bdd36dfc88381995e6823ff3f419b5a0cb8ac4f/orders.csv' AS row
MATCH (order:Order {orderID: row.OrderID})
MATCH (employee:Employee {employeeID: row.EmployeeID})
MERGE (employee)-[:SOLD]-&gt;(order);</code></pre>
</div>
</div>
<div class="paragraph">
<p>This code creates 830 relationships in the graph.</p>
</div>
<div class="paragraph">
<p>You can view some of them by executing this code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cypher hljs" data-lang="cypher">MATCH (o:Order)-[]-(e:Employee)
RETURN o,e LIMIT 10;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Your graph view should look something like this:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../_images/import-guide-SOLD.svg" alt="import guide SOLD" width="400">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_creating_relationships_between_products_and_suppliers_and_between_products_and_categories"><a class="anchor" href="#_creating_relationships_between_products_and_suppliers_and_between_products_and_categories"></a>Creating relationships between Products and Suppliers and between Products and Categories</h3>
<div class="paragraph">
<p>Next, create relationships between Products, Suppliers, and Categories:</p>
</div>
<div class="paragraph">
<p>Execute this code block:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cypher hljs" data-lang="cypher">// Create relationships between products and suppliers
LOAD CSV WITH HEADERS FROM 'https://gist.githubusercontent.com/jexp/054bc6baf36604061bf407aa8cd08608/raw/8bdd36dfc88381995e6823ff3f419b5a0cb8ac4f/products.csv
' AS row
MATCH (product:Product {productID: row.ProductID})
MATCH (supplier:Supplier {supplierID: row.SupplierID})
MERGE (supplier)-[:SUPPLIES]-&gt;(product);</code></pre>
</div>
</div>
<div class="paragraph">
<p>This code creates 77 relationships in the graph.</p>
</div>
<div class="paragraph">
<p>You can view some of them by executing this code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cypher hljs" data-lang="cypher">MATCH (s:Supplier)-[]-(p:Product)
RETURN s,p LIMIT 10;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Your graph view should look something like this:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../_images/import-guide-SUPPLIES.svg" alt="import guide SUPPLIES" width="400">
</div>
</div>
<div class="paragraph">
<p>Then, execute this code block:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cypher hljs" data-lang="cypher">// Create relationships between products and categories
LOAD CSV WITH HEADERS FROM 'https://gist.githubusercontent.com/jexp/054bc6baf36604061bf407aa8cd08608/raw/8bdd36dfc88381995e6823ff3f419b5a0cb8ac4f/products.csv
' AS row
MATCH (product:Product {productID: row.ProductID})
MATCH (category:Category {categoryID: row.CategoryID})
MERGE (product)-[:PART_OF]-&gt;(category);</code></pre>
</div>
</div>
<div class="paragraph">
<p>This code creates 77 relationships in the graph.</p>
</div>
<div class="paragraph">
<p>You can view some of them by executing this code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cypher hljs" data-lang="cypher">MATCH (c:Category)-[]-(p:Product)
RETURN c,p LIMIT 10;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Your graph view should look something like this:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../_images/import-guide-PART_OF.svg" alt="import guide PART OF" width="400">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_creating_relationships_between_employees"><a class="anchor" href="#_creating_relationships_between_employees"></a>Creating relationships between Employees</h3>
<div class="paragraph">
<p>Lastly, you will create the 'REPORTS_TO' relationship between Employees to represent the reporting structure:</p>
</div>
<div class="paragraph">
<p>Execute this code block:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cypher hljs" data-lang="cypher">// Create relationships between employees (reporting hierarchy)
LOAD CSV WITH HEADERS FROM 'https://gist.githubusercontent.com/jexp/054bc6baf36604061bf407aa8cd08608/raw/8bdd36dfc88381995e6823ff3f419b5a0cb8ac4f/employees.csv' AS row
MATCH (employee:Employee {employeeID: row.EmployeeID})
MATCH (manager:Employee {employeeID: row.ReportsTo})
MERGE (employee)-[:REPORTS_TO]-&gt;(manager);</code></pre>
</div>
</div>
<div class="paragraph">
<p>This code creates 8 relationships in the graph.</p>
</div>
<div class="paragraph">
<p>You can view some of them by executing this code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cypher hljs" data-lang="cypher">MATCH (e1:Employee)-[]-(e2:Employee)
RETURN e1,e2 LIMIT 10;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Your graph view should look something like this:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../../_images/import-guide-REPORTS_TO.svg" alt="import guide REPORTS TO" width="400">
</div>
</div>
<div class="paragraph">
<p>Next, you will query the resulting graph to find out what it can tell us about our newly-imported data.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="query-northwind"><a class="anchor" href="#query-northwind"></a>Querying the graph</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We might start with a couple of general queries to verify that our data matches the model we designed earlier in the guide.
Here are some example queries.</p>
</div>
<div class="paragraph">
<p>Execute this code block:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cypher hljs" data-lang="cypher">//find a sample of employees who sold orders with their ordered products
MATCH (e:Employee)-[rel:SOLD]-&gt;(o:Order)-[rel2:CONTAINS]-&gt;(p:Product)
RETURN e, rel, o, rel2, p LIMIT 25;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Execute this code block:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cypher hljs" data-lang="cypher">//find the supplier and category for a specific product
MATCH (s:Supplier)-[r1:SUPPLIES]-&gt;(p:Product {productName: 'Chocolade'})-[r2:PART_OF]-&gt;(c:Category)
RETURN s, r1, p, r2, c;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once you are comfortable that the data aligns with our data model and everything looks correct, you can start querying to gather information and insights for business decisions.</p>
</div>
<div class="sect2">
<h3 id="_which_employee_had_the_highest_cross_selling_count_of_chocolade_and_another_product"><a class="anchor" href="#_which_employee_had_the_highest_cross_selling_count_of_chocolade_and_another_product"></a>Which Employee had the highest cross-selling count of 'Chocolade' and another product?</h3>
<div class="paragraph">
<p>Execute this code block:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cypher hljs" data-lang="cypher">MATCH (choc:Product {productName:'Chocolade'})&lt;-[:CONTAINS]-(:Order)&lt;-[:SOLD]-(employee),
      (employee)-[:SOLD]-&gt;(o2)-[:CONTAINS]-&gt;(other:Product)
RETURN employee.employeeID as employee, other.productName as otherProduct, count(distinct o2) as count
ORDER BY count DESC
LIMIT 5;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Looks like employee No. 4 was busy, though employee No. 1 also did well!
Your results should look something like this:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">employee</th>
<th class="tableblock halign-left valign-top">otherProduct</th>
<th class="tableblock halign-left valign-top">count</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gnocchi di nonna Alice</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">14</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pâté chinois</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Flotemysost</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gumbär Gummibärchen</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pavlova</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">11</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_how_are_employees_organized_who_reports_to_whom"><a class="anchor" href="#_how_are_employees_organized_who_reports_to_whom"></a>How are Employees organized? Who reports to whom?</h3>
<div class="paragraph">
<p>Execute this code block:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cypher hljs" data-lang="cypher">MATCH (e:Employee)&lt;-[:REPORTS_TO]-(sub)
RETURN e.employeeID AS manager, sub.employeeID AS employee;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Your results should look something like this:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">manager</th>
<th class="tableblock halign-left valign-top">employee</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Notice that employee No. 5 has people reporting to them but also reports to employee No. 2.</p>
</div>
<div class="paragraph">
<p>Next, let&#8217;s investigate that a bit more.</p>
</div>
</div>
<div class="sect2">
<h3 id="_which_employees_report_to_each_other_indirectly"><a class="anchor" href="#_which_employees_report_to_each_other_indirectly"></a>Which Employees report to each other indirectly?</h3>
<div class="paragraph">
<p>Execute this code block:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cypher hljs" data-lang="cypher">MATCH path = (e:Employee)&lt;-[:REPORTS_TO*]-(sub)
WITH e, sub, [person in NODES(path) | person.employeeID][1..-1] AS path
RETURN e.employeeID AS manager, path as middleManager, sub.employeeID AS employee
ORDER BY size(path);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Your results should look something like this:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">manager</th>
<th class="tableblock halign-left valign-top">middleManager</th>
<th class="tableblock halign-left valign-top">employee</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[5]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">9</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[5]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[5]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_how_many_orders_were_made_by_each_part_of_the_hierarchy"><a class="anchor" href="#_how_many_orders_were_made_by_each_part_of_the_hierarchy"></a>How many orders were made by each part of the hierarchy?</h3>
<div class="paragraph">
<p>Execute this code block:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cypher hljs" data-lang="cypher">MATCH (e:Employee)
OPTIONAL MATCH (e)&lt;-[:REPORTS_TO*0..]-(sub)-[:SOLD]-&gt;(order)
RETURN e.employeeID as employee, [x IN COLLECT(DISTINCT sub.employeeID) WHERE x &lt;&gt; e.employeeID] AS reportsTo, COUNT(distinct order) AS totalOrders
ORDER BY totalOrders DESC;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Your results should look something like this:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">employee</th>
<th class="tableblock halign-left valign-top">reportsTo</th>
<th class="tableblock halign-left valign-top">totalOrders</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[8,1,5,6,7,9,4,3]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">830</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[6,7,9]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">224</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">156</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">127</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">123</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">104</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">72</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">67</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">43</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_whats_next"><a class="anchor" href="#_whats_next"></a>What&#8217;s next?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you followed along with each step through this guide, then you might want to explore the data set with more queries and try to answer additional questions you came up with for the data.
You may also want to apply these same principles to your own or another data set for analysis.</p>
</div>
<div class="paragraph">
<p>If you used this as a process flow to apply to a different data set or you would like to do that next, feel free to start at the top and work through this guide again with another domain.
The steps and processes still apply (though, of course, the data model, queries, and business questions will need adjusted).</p>
</div>
<div class="paragraph">
<p>If you have data that needs additional cleansing and manipulation than what is covered in this guide, the <a href="https://neo4j.com/docs/apoc/current/" target="_blank" rel="noopener">APOC library</a> may be able to help.
It contains hundreds of procedures and functions for handling large amounts of data, translating values, cleaning messy data sources, and more!</p>
</div>
<div class="paragraph">
<p>If you are interested in doing a one-time initial dump of relational data to Neo4j, then the <a href="https://neo4j.com/labs/etl-tool/" target="_blank" rel="noopener">Neo4j ETL Tool</a> might be what you are looking for.
The application is designed with a point-and-click user interface with the goal of fast, simple relational-to-graph loads that help new and existing users gain faster value from seeing their data as a graph without Cypher, import procedures, or other code.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="import-northwind-resources"><a class="anchor" href="#import-northwind-resources"></a>Resources</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/neo4j-contrib/developer-resources/tree/gh-pages/data/northwind" target="_blank" rel="noopener">Northwind SQL, CSV and Cypher data files</a>, also as <a href="https://github.com/neo4j-contrib/developer-resources/tree/gh-pages/data/northwind/northwind.zip" target="_blank" rel="noopener">zip</a> file</p>
</li>
<li>
<p><a href="https://neo4j.com/docs/cypher-manual/current/clauses/load-csv/" target="_blank" rel="noopener">LOAD CSV</a>: Cypher&#8217;s command for importing CSV files</p>
</li>
<li>
<p><a href="https://neo4j.com/docs/apoc/current/" target="_blank" rel="noopener">APOC library</a>: Neo4j&#8217;s utility library</p>
</li>
<li>
<p><a href="https://neo4j.com/labs/etl-tool//" target="_blank" rel="noopener">Neo4j ETL Tool</a>: Loading relational data without code</p>
</li>
<li>
<p><a href="https://neo4j.com/docs/getting-started/4.4/data-import/" target="_blank" rel="noopener">Importing Data with Neo4j</a></p>
</li>
<li>
<p><a href="https://neo4j.com/docs/getting-started/4.4/data-modeling" target="_blank" rel="noopener">Graph Data Modeling</a></p>
</li>
</ul>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="../guide-build-a-recommendation-engine/">Tutorial: Build a Cypher Recommendation Engine</a></span>

  <span class="next"><a href="../guide-import-desktop-csv/">How-To: Import CSV data with Neo4j Desktop</a></span>
</nav>
    <div class="feedback">
    <div class="header question">
        <p><strong>Was this page helpful?</strong></p>

        <svg width="22px" height="22px" viewBox="0 0 22 22" role="button" class="no" aria-label="No, this page isn't helpful">
            <path
                d="M6.25,15.8333333 C6.25,13.7622655 7.92893219,12.0833333 10,12.0833333 C12.0710678,12.0833333 13.75,13.7622655 13.75,15.8333333"
                ></path>
            <circle  cx="10" cy="10" r="9.58333333"></circle>
            <path
                d="M12.5,4.58333333 C12.8934466,4.05873783 13.5109223,3.75 14.1666667,3.75 C14.822411,3.75 15.4398867,4.05873783 15.8333333,4.58333333"
                ></path>
            <line x1="4.58333333" y1="7.91666667" x2="7.08333333" y2="7.91666667" ></line>
            <path
                d="M7.08333333,8.54166667 C6.96827401,8.54166667 6.875,8.44839266 6.875,8.33333333 C6.875,8.21827401 6.96827401,8.125 7.08333333,8.125 C7.19839266,8.125 7.29166667,8.21827401 7.29166667,8.33333333 C7.29166667,8.44839266 7.19839266,8.54166667 7.08333333,8.54166667"
                ></path>
            <line x1="12.9166667" y1="7.91666667" x2="15.4166667" y2="7.91666667" ></line>
            <path
                d="M15.4166667,8.54166667 C15.3016073,8.54166667 15.2083333,8.44839266 15.2083333,8.33333333 C15.2083333,8.21827401 15.3016073,8.125 15.4166667,8.125 C15.531726,8.125 15.625,8.21827401 15.625,8.33333333 C15.625,8.44839266 15.531726,8.54166667 15.4166667,8.54166667"
                ></path>
            <path
                d="M4.16666667,4.58333333 C4.5601133,4.05873783 5.17758895,3.75 5.83333333,3.75 C6.48907772,3.75 7.10655337,4.05873783 7.5,4.58333333"
                ></path>
        </svg>

        <svg width="22px" height="22px" viewBox="0 0 22 22" role="button" class="yes" aria-label="Yes, this page is helpful">
            <circle  cx="10" cy="10" r="9.58333333"></circle>
            <path
                d="M5.41666667,8.125 C5.53172599,8.125 5.625,8.21827401 5.625,8.33333333 C5.625,8.44839266 5.53172599,8.54166667 5.41666667,8.54166667 C5.30160734,8.54166667 5.20833333,8.44839266 5.20833333,8.33333333 C5.20833333,8.21827401 5.30160734,8.125 5.41666667,8.125"
                ></path>
            <path
                d="M14.5833333,8.125 C14.468274,8.125 14.375,8.21827401 14.375,8.33333333 C14.375,8.44839266 14.468274,8.54166667 14.5833333,8.54166667 C14.6983927,8.54166667 14.7916667,8.44839266 14.7916667,8.33333333 C14.7916667,8.21827401 14.6983927,8.125 14.5833333,8.125"
                ></path>
            <path
                d="M13.2275,12.9166657 C13.4853075,12.9162808 13.7287776,13.035241 13.8869095,13.2388563 C14.0450415,13.4424715 14.1000278,13.7078123 14.0358333,13.9575 C13.562901,15.7999679 11.9021969,17.0882321 10,17.0882321 C8.09780311,17.0882321 6.43709903,15.7999679 5.96416667,13.9575 C5.89997223,13.7078123 5.95495852,13.4424715 6.11309045,13.2388563 C6.27122239,13.035241 6.51469246,12.9162808 6.7725,12.9166657 L13.2275,12.9166657 Z"
                ></path>
        </svg>
    </div>


</div></article>
<aside class="toc sidebar" data-title="Contents"
  data-levels="2">
  <div class="toc-menu">
    <div class="toc-menu-placeholder"></div>

      </div>
  </aside>  </div>
</main>
</div>
<footer class="footer">
  <div class="wrapper">
  <div class="column">
    <div class="logo-footer"></div>
    <p>© <span id="footer-copyright-year">2023</span> Neo4j, Inc.<br>
      <a href="https://neo4j.com/terms/">Terms</a> | <a href="https://neo4j.com/privacy-policy/">Privacy </a> | <a href="https://neo4j.com/sitemap/">Sitemap</a></p>
    <p>Neo4j<sup>®</sup>, Neo Technology<sup>®</sup>, Cypher<sup>®</sup>, Neo4j<sup>®</sup> Bloom<sup>™</sup> and
      Neo4j<sup>®</sup> Aura<sup>™</sup> are registered trademarks
      of Neo4j, Inc. All other marks are owned by their respective companies.</p>
  </div>

  <div class="column">
    <h2><a href="https://neo4j.com/contact-us/?ref=footer">Contact Us →</a></h2>
    <p>US: 1-855-636-4532<br>
      Sweden +46 171 480 113<br>
      UK: +44 20 3868 3223<br>
      France: +33 (0) 1 88 46 13 20<br>
      <!--Germany: +49 (0)89 26204 6300</p>-->
    </p>
  </div>
  <div class="column links">
    <h2>Learn</h2>
    <ul>
      <li><i class="fa fa-wrench" aria-hidden="true"></i> <a rel="noopener" href="https://neo4j.com/sandbox/?ref=developer-footer">Sandbox</a></li>
      <li><i class="fa fa-comments-o" aria-hidden="true"></i> <a rel="noopener" href="https://community.neo4j.com?ref=developer-footer" target="_blank">Neo4j Community Site</a></li>
      <li><i class="fa fa-book" aria-hidden="true"></i> <a rel="noopener" href="https://medium.com/neo4j" target="_blank">Neo4j Developer Blog</a></li>
      <li><i class="fa fa-youtube" aria-hidden="true"></i> <a rel="noopener" href="https://www.youtube.com/neo4j" target="_blank">Neo4j Videos</a></li>
      <li><i class="fa fa-graduation-cap" aria-hidden="true"></i> <a rel="noopener" href="https://neo4j.com/graphacademy/?ref=developer-footer">GraphAcademy</a></li>
      <li><i class="fa fa-flask" aria-hidden="true"></i> <a href="https://neo4j.com/labs/?ref=developer-footer">Neo4j Labs</a></li>
    </ul>
  </div>
  <div class="column links">
    <h2>Social</h2>
    <ul>
      <li><i class="fa fa-twitter" aria-hidden="true"></i> <a rel="noopener" href="https://twitter.com/neo4j" target="_blank">Twitter</a></li>
      <li><i class="fa fa-meetup" aria-hidden="true"></i> <a rel="noopener" href="https://www.meetup.com/Neo4j-Online-Meetup/" target="_blank">Meetups</a></li>
      <li><i class="fa fa-github" aria-hidden="true"></i> <a rel="noopener" href="https://github.com/neo4j/neo4j" target="_blank">Github</a></li>
      <li><i class="fa fa-stack-overflow" aria-hidden="true"></i> <a rel="noopener" href="https://stackoverflow.com/questions/tagged/neo4j" target="_blank">Stack Overflow</a></li>

      <li class="speaker-program"><a href="https://docs.google.com/forms/d/e/1FAIpQLSdEcNnMruES5iwvOVYovmS1D_P1ZL_HdUOitFrwrvruv5PZvA/viewform">Want to Speak?</a></li>
    </ul>
  </div>
</div>
</footer>

  <script src="../../../../assets/js/vendor/auth0.js"></script>
  <script src="../../../../assets/js/site.js"></script>
  <script async src="../../../../assets/js/vendor/highlight.js"></script>
  <script async src="../../../../assets/js/vendor/image-zoom.js"></script>


<div id="neo4j-algolia-search-v2"></div>
<script src="https://neo4j.com/wp-content/themes/neo4jweb/assets/neo4j-react-modules-assets/search-preact/chunkless/bundle.js"></script>
<script src="https://neo4j.com/wp-content/themes/neo4jweb/assets/neo4j-react-modules-assets/search-preact/chunkless/polyfill.js"></script>
<script>window.algoliaSearchOptions = {indexName: "docs",placeholder: "Search Documentation",template: "docs"}</script>  </body>
</html>
